version: "3.8"

services:
  streamrip:
    container_name: streamrip-web
    build:
      context: .
      dockerfile: Dockerfile
    image: joelhandyjoel/streamrip-web-gui:latest

    user: "1000:1001"

    environment:
      # App paths (can be overridden in Portainer)
      CONFIG_DIR: /config
      DOWNLOAD_DIR: /music

      # Streamrip expectations
      HOME: /config
      XDG_CONFIG_HOME: /config
      STREAMRIP_CONFIG: /config/streamrip/config.toml

      MAX_CONCURRENT_DOWNLOADS: 1

    volumes:
      - /mnt/docker/streamrip:/config/streamrip
      - /mnt/media/Music:/music

    ports:
      - "5002:5000"

    restart: unless-stopped
